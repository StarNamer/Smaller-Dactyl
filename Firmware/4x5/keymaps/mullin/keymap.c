#include "small_dactyl.h"
#include "action_layer.h"
#include "eeconfig.h"

extern keymap_config_t keymap_config;

#define QWERTY 0
#define COLEMAK 1
#define SYM 2
#define NUM 3
#define NAV 4




// Fillers to make layering more clear

#define ____ KC_TRNS

//Always start your new keys with KC_
#define KC_SFT_Z  SFT_T(KC_Z)

#define KC_NUMDEL LT(NUM, KC_DEL)
#define KC_ESCNAV LT(NAV, KC_ESC)
#define KC_NUMENT LT(NUM, KC_ENT)

const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {

[QWERTY] = LAYOUT_kc( \
//  ┌────────┬────────┬────────┬────────┬────────┐                   ┌────────┬────────┬────────┬────────┬────────┐
         Q   ,    W   ,    E   ,    R   ,    T   ,                        Y   ,    U   ,    I   ,    O   ,    P   ,
//  ├────────┼────────┼────────┼────────┼────────┤                   ├────────┼────────┼────────┼────────┼────────┤
         A   ,    S   ,    D   ,    F   ,    G   ,                        H   ,    J   ,    K   ,    L   ,  SCLN  ,
//  ├────────┼────────┼────────┼────────┼────────┼────────┐ ┌────────┼────────┼────────┼────────┼────────┼────────┤
       SFT_Z ,    X   ,    C   ,    V   ,    B   , ESCNAV ,    SYM   ,    N   ,    M   ,  COMM  ,   DOT  ,  SLSH  ,
//  └────────┴────────┴────────┼────────┼────────┼────────┤ └────────┴────────┴────────┴────────┴────────┴────────┘
                                  LCTL  ,   SPC  , NUMDEL ,   NUMENT ,  BSPC  ,  LALT
//                             └────────┴────────┴────────┘ └────────┴────────┴────────┘
),

[COLEMAK] = LAYOUT_kc( \
//  ┌────────┬────────┬────────┬────────┬────────┐                   ┌────────┬────────┬────────┬────────┬────────┐
         Q   ,    W   ,    F   ,    P   ,    G   ,                        J   ,    L   ,    U   ,    Y   ,  SCLN  ,
//  ├────────┼────────┼────────┼────────┼────────┤                   ├────────┼────────┼────────┼────────┼────────┤
         A   ,    R   ,    S   ,    T   ,    D   ,                        H   ,    N   ,    E   ,    I   ,    O   ,
//  ├────────┼────────┼────────┼────────┼────────┼────────┐ ┌────────┼────────┼────────┼────────┼────────┼────────┤
         Z   ,    X   ,    C   ,    V   ,    B   , ESCNAV ,    SYM   ,    K   ,    M   ,  COMM  ,   DOT  ,  SLSH  ,
//  └────────┴────────┴────────┼────────┼────────┼────────┤ └────────┴────────┴────────┴────────┴────────┴────────┘
                                  LCTL  ,   SPC  , NUMDEL ,   NUMENT ,  BSPC  ,  LALT
//                             └────────┴────────┴────────┘ └────────┴────────┴────────┘
),

[NAV] = LAYOUT_kc( \
//  ┌────────┬────────┬────────┬────────┬────────┐                   ┌────────┬────────┬────────┬────────┬────────┐
       ENT   ,  STAB  ,  TAB   ,  ESC   ,  DEL   ,                      STAB  ,  PGUP  ,   UP   ,  PGDN  ,  LGUI  ,
//  ├────────┼────────┼────────┼────────┼────────┤                   ├────────┼────────┼────────┼────────┼────────┤
       LCTL  ,  LGUI  ,  LSHFT ,  LALT  ,  BSPC  ,                      BSPS  ,  LEFT  ,  DOWN  ,  RGHT  ,  ENT   ,
//  ├────────┼────────┼────────┼────────┼────────┼────────┐ ┌────────┼────────┼────────┼────────┼────────┼────────┤
       UNDO  ,  CUT   ,  COPY  ,  PASTE , SELALL , ESCNAV ,    SYM   ,  TAB   ,  HOME  ,  DEL   ,  END    ,  REDO  ,
//  └────────┴────────┴────────┼────────┼────────┼────────┤ └────────┴────────┴────────┴────────┴────────┴────────┘
                                  LCTL  ,   SPC  , NUMDEL ,   NUMENT ,  BSPC  ,  LALT
//                             └────────┴────────┴────────┘ └────────┴────────┴────────┘
),

[NUM] = LAYOUT_kc( \
//  ┌────────┬────────┬────────┬────────┬────────┐                   ┌────────┬────────┬────────┬────────┬────────┐
       EXCL  ,  STAB  ,  TAB   ,  EQL   ,  DEL   ,                      MINS  ,    7   ,    8   ,    9   ,  ASTR   ,
//  ├────────┼────────┼────────┼────────┼────────┤                   ├────────┼────────┼────────┼────────┼────────┤
       LCTL  ,  LGUI  ,  LSHFT ,  LALT  ,  AMP   ,                      BSPS  ,    4   ,    5   ,    6   ,  ENT   ,
//  ├────────┼────────┼────────┼────────┼────────┼────────┐ ┌────────┼────────┼────────┼────────┼────────┼────────┤
       LPRN  ,  LT    ,  PERC  ,  GT    ,  RPRN  , ESCNAV ,    SYM   ,  PLUS  ,    1   ,    2   ,    3   ,  SLSH  ,
//  └────────┴────────┴────────┼────────┼────────┼────────┤ └────────┴────────┴────────┴────────┴────────┴────────┘
                                  LCTL  ,   SPC  , NUMDEL ,   NUMENT ,  BSPC  ,  LALT
//                             └────────┴────────┴────────┘ └────────┴────────┴────────┘
),

[SYM] = LAYOUT_kc( \
//  ┌────────┬────────┬────────┬────────┬────────┐                   ┌────────┬────────┬────────┬────────┬────────┐
       SCLN  ,  STAB  ,  DQT   ,  PLUS  ,  PIPE  ,                      BSLS  ,  RCBR  ,  RPRN  ,  RBRC  ,  GT    ,
//  ├────────┼────────┼────────┼────────┼────────┤                   ├────────┼────────┼────────┼────────┼────────┤
       COLN  ,  UNDS  ,  QUOT  ,  EQL   ,  AMP   ,                      SLSH  ,  LCBR  ,  LPRN  ,  LBRC  ,  LT    ,
//  ├────────┼────────┼────────┼────────┼────────┼────────┐ ┌────────┼────────┼────────┼────────┼────────┼────────┤
       EXLM  ,  QUES  ,   AT   ,  DLR   ,  ASTR  , ESCNAV ,    SYM   ,  HASH  ,  CIRC  ,  PERC  ,  TILD  ,  GRV   ,
//  └────────┴────────┴────────┼────────┼────────┼────────┤ └────────┴────────┴────────┴────────┴────────┴────────┘
                                  LCTL  ,   SPC  , NUMDEL ,   NUMENT ,  BSPC  ,  LALT
//                             └────────┴────────┴────────┘ └────────┴────────┴────────┘
),

[FUNC] = LAYOUT_kc( \
//  ┌────────┬────────┬────────┬────────┬────────┐                   ┌────────┬────────┬────────┬────────┬────────┐
       LOCK  ,  SIZE  ,  CAPS  ,  MOVE  ,  VOLU  ,                     SCRUP  ,   F7   ,   F8   ,  RBRC  ,  GTN   ,
//  ├────────┼────────┼────────┼────────┼────────┤                   ├────────┼────────┼────────┼────────┼────────┤
       LCTL  ,  LGUI  ,  LSHFT ,  LALT  ,  MUTE  ,                      INS   ,   F4   ,   F5   ,  LBRC  ,  LTN   ,
//  ├────────┼────────┼────────┼────────┼────────┼────────┐ ┌────────┼────────┼────────┼────────┼────────┼────────┤
       LEFT  ,  DOWN  ,   UP   ,  RGHT  ,  VOLD  , ESCNAV ,    SYM   , SCRDN  ,   F1   ,   F2   ,   F3   ,  GRV   ,
//  └────────┴────────┴────────┼────────┼────────┼────────┤ └────────┴────────┴────────┴────────┴────────┴────────┘
                                  LCTL  ,   SPC  , NUMDEL ,   NUMENT ,  BSPC  ,  LALT
//                             └────────┴────────┴────────┘ └────────┴────────┴────────┘
)
};

void persistent_default_layer_set(uint16_t default_layer) {
  eeconfig_update_default_layer(default_layer);
  default_layer_set(default_layer);
}

